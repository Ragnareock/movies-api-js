{"mappings":"AAAA,SAASA,EAAYC,EAAO,GAK1B,OAAOC,MAAM,kGAAmDD,KAAQE,MACtEC,IACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,MAAM,G,CCV5B,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,EAACC,YAAEA,EAAWC,aAAEA,EAAYC,eAAEA,EAAcC,aAAEA,KAAmB,mEAEnBH,WAAqBE,sBAC3DA,sBACDD,qBACAE,uBAGRC,KAAK,G,CCkBV,MAAMC,EAAcC,SAASC,cAAc,iBACrCC,EAAUF,SAASC,cAAc,aACjCE,EAAWH,SAASC,cAAc,WAQlCG,EAAW,IAAIC,sBAGrB,SAA2BC,EAASC,GAClCC,QAAQC,IAAIH,GACZA,EAAQI,SAAQC,IACVA,EAAMC,iBACRC,GAAQ,EACRV,EAASW,QAAS,EAClBhC,EAAY+B,GACT5B,MAAK8B,IACJhB,EAAYiB,mBACV,YACAzB,EAAawB,EAAKE,UAEhBF,EAAKhC,MAAQgC,EAAKG,aACpBX,EAASY,UAAUR,EAAMS,OAAO,IAGnCC,OAAMC,GAASd,QAAQC,IAAIa,KAC3BC,SAAQ,IAAOpB,EAASW,QAAS,I,MA1B1B,CACdU,KAAM,KACNC,WAAY,QACZC,UAAW,IAIb,IAAIb,EAAO,EAwBX/B,IACGG,MAAK8B,IACJhB,EAAYiB,mBAAmB,YAAazB,EAAawB,EAAKE,UAC1DF,EAAKhC,KAAOgC,EAAKG,aACnBd,EAASuB,QAAQzB,EAAQ,IAG5BmB,OAAMC,GAAUM,SAASC,KAAO","sources":["src/js/movies-api.js","src/js/cardMarkup.js","src/index.js"],"sourcesContent":["function serviceMove(page = 1) {\n  const BASE_URL = 'https://api.themoviedb.org/3';\n  const END_POINT = '/trending/movie/week';\n  const API_KEY = 'b252a3be4f66a1920a26a286abc3ccbf';\n\n  return fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n}\n\nexport { serviceMove };\n","function createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, release_date, original_title, vote_average }) => `\n      <li>\n        <img src=\"https://image.tmdb.org/t/p/w300/${poster_path}\" alt=\"${original_title}\" />\n        <h2>${original_title}</h2>\n        <p>${release_date}</p>\n        <p>${vote_average}</p>\n      </li>`\n    )\n    .join('');\n}\n\nexport { createMarkup };\n","import { serviceMove } from './js/movies-api';\nimport { createMarkup } from './js/cardMarkup';\n\n// const containerEl = document.querySelector('.js-move-list');\n// const loadEl = document.querySelector('.js-load-more');\n\n// let page = 1;\n// loadEl.addEventListener('click', onLoadMore);\n\n// function onLoadMore() {\n//   page += 1;\n//   serviceMove(page).then(data => {\n//     containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//     if (data.page >= data.total_pages) {\n//       loadEl.hidden = true;\n//     }\n//   });\n// }\n\n// serviceMove()\n//   .then(data => {\n//     console.log(data);\n//     containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//     if (data.page < data.total_pages) {\n//       loadEl.hidden = false;\n//     }\n//   })\n//   .catch(error => console.log(error));\n\nconst containerEl = document.querySelector('.js-move-list');\nconst guardEl = document.querySelector('.js-guard');\nconst loaderEl = document.querySelector('.loader');\n\nconst options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 0,\n};\n\nconst observer = new IntersectionObserver(handlerPagination, options);\nlet page = 1;\n\nfunction handlerPagination(entries, observer) {\n  console.log(entries);\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      loaderEl.hidden = false;\n      serviceMove(page)\n        .then(data => {\n          containerEl.insertAdjacentHTML(\n            'beforeend',\n            createMarkup(data.results)\n          );\n          if (data.page >= data.total_pages) {\n            observer.unobserve(entry.target);\n          }\n        })\n        .catch(error => console.log(error))\n        .finally(() => (loaderEl.hidden = true));\n    }\n  });\n}\n\nserviceMove()\n  .then(data => {\n    containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page < data.total_pages) {\n      observer.observe(guardEl);\n    }\n  })\n  .catch(error => (location.href = './error.html'));\n"],"names":["$efa28e454bc0531a$export$60c0cb24972a208c","page","fetch","then","response","ok","Error","statusText","json","$addb2175690f7858$export$24783e9f3a24abe4","arr","map","poster_path","release_date","original_title","vote_average","join","$1f0dc3b9307be026$var$containerEl","document","querySelector","$1f0dc3b9307be026$var$guardEl","$1f0dc3b9307be026$var$loaderEl","$1f0dc3b9307be026$var$observer","IntersectionObserver","entries","observer1","console","log","forEach","entry","isIntersecting","$1f0dc3b9307be026$var$page","hidden","data","insertAdjacentHTML","results","total_pages","unobserve","target","catch","error","finally","root","rootMargin","threshold","observe","location","href"],"version":3,"file":"index.eccb7b22.js.map"}