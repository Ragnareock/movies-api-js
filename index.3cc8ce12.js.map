{"mappings":"YAAA,SAASA,I,IAAYC,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EACpBE,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCAEhB,OAAOC,MAAM,GAAcC,OAAXJ,GAAgCI,OAArBH,EAAU,aAA2BG,OAAhBF,EAAQ,UAAaE,OAALP,IAAQQ,MACtE,SAAAC,GACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,M,ICVtB,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAYF,EAAZE,aAAcC,EAAcH,EAAdG,eAAgBC,EAAYJ,EAAZI,a,MAAmB,mEAEEd,OAArBW,EAAY,WAClDX,OAD2Da,EAAe,sBAE3Eb,OADCa,EAAe,sBAEhBb,OADAY,EAAa,qBACAZ,OAAbc,EAAa,oB,IAGrBC,KAAK,G,CCkBV,IAAMC,EAAcC,SAASC,cAAc,iBACrCC,EAAUF,SAASC,cAAc,aACjCE,EAAWH,SAASC,cAAc,WAQlCG,EAAW,IAAIC,sBAGrB,SAA2BC,EAASC,GAClCC,QAAQC,IAAIH,GACZA,EAAQI,SAAQ,SAAAC,GACVA,EAAMC,iBACRC,GAAQ,EACRV,EAASW,QAAS,EAClBvC,EAAYsC,GACT7B,MAAK,SAAA+B,GACJhB,EAAYiB,mBACV,YACA1B,EAAayB,EAAKE,UAEhBF,EAAKvC,MAAQuC,EAAKG,aACpBX,EAASY,UAAUR,EAAMS,O,IAG5BC,OAAM,SAAAC,G,OAASd,QAAQC,IAAIa,E,IAC3BC,SAAQ,W,OAAOpB,EAASW,QAAS,C,UA1B1B,CACdU,KAAM,KACNC,WAAY,QACZC,UAAW,IAITb,EAAO,EAwBXtC,IACGS,MAAK,SAAA+B,GACJhB,EAAYiB,mBAAmB,YAAa1B,EAAayB,EAAKE,UAC1DF,EAAKvC,KAAOuC,EAAKG,aACnBd,EAASuB,QAAQzB,E,IAGpBmB,OAAM,SAAAC,G,OAAUM,SAASC,KAAO,c","sources":["src/js/movies-api.js","src/js/cardMarkup.js","src/index.js"],"sourcesContent":["function serviceMove(page = 1) {\n  const BASE_URL = 'https://api.themoviedb.org/3';\n  const END_POINT = '/trending/movie/week';\n  const API_KEY = 'b252a3be4f66a1920a26a286abc3ccbf';\n\n  return fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=${page}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n}\n\nexport { serviceMove };\n","function createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, release_date, original_title, vote_average }) => `\n      <li>\n        <img src=\"https://image.tmdb.org/t/p/w300/${poster_path}\" alt=\"${original_title}\" />\n        <h2>${original_title}</h2>\n        <p>${release_date}</p>\n        <p>${vote_average}</p>\n      </li>`\n    )\n    .join('');\n}\n\nexport { createMarkup };\n","import { serviceMove } from './js/movies-api';\nimport { createMarkup } from './js/cardMarkup';\n\n// const containerEl = document.querySelector('.js-move-list');\n// const loadEl = document.querySelector('.js-load-more');\n\n// let page = 1;\n// loadEl.addEventListener('click', onLoadMore);\n\n// function onLoadMore() {\n//   page += 1;\n//   serviceMove(page).then(data => {\n//     containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//     if (data.page >= data.total_pages) {\n//       loadEl.hidden = true;\n//     }\n//   });\n// }\n\n// serviceMove()\n//   .then(data => {\n//     console.log(data);\n//     containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//     if (data.page < data.total_pages) {\n//       loadEl.hidden = false;\n//     }\n//   })\n//   .catch(error => console.log(error));\n\nconst containerEl = document.querySelector('.js-move-list');\nconst guardEl = document.querySelector('.js-guard');\nconst loaderEl = document.querySelector('.loader');\n\nconst options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 0,\n};\n\nconst observer = new IntersectionObserver(handlerPagination, options);\nlet page = 1;\n\nfunction handlerPagination(entries, observer) {\n  console.log(entries);\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      page += 1;\n      loaderEl.hidden = false;\n      serviceMove(page)\n        .then(data => {\n          containerEl.insertAdjacentHTML(\n            'beforeend',\n            createMarkup(data.results)\n          );\n          if (data.page >= data.total_pages) {\n            observer.unobserve(entry.target);\n          }\n        })\n        .catch(error => console.log(error))\n        .finally(() => (loaderEl.hidden = true));\n    }\n  });\n}\n\nserviceMove()\n  .then(data => {\n    containerEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page < data.total_pages) {\n      observer.observe(guardEl);\n    }\n  })\n  .catch(error => (location.href = './error.html'));\n"],"names":["$e1490dc3da8d722a$export$60c0cb24972a208c","page","arguments","length","BASE_URL","END_POINT","API_KEY","fetch","concat","then","response","ok","Error","statusText","json","$550a638ca900c4a0$export$24783e9f3a24abe4","arr","map","param","poster_path","release_date","original_title","vote_average","join","$b8f9b7833fa37166$var$containerEl","document","querySelector","$b8f9b7833fa37166$var$guardEl","$b8f9b7833fa37166$var$loaderEl","$b8f9b7833fa37166$var$observer","IntersectionObserver","entries","observer1","console","log","forEach","entry","isIntersecting","$b8f9b7833fa37166$var$page","hidden","data","insertAdjacentHTML","results","total_pages","unobserve","target","catch","error","finally","root","rootMargin","threshold","observe","location","href"],"version":3,"file":"index.3cc8ce12.js.map"}